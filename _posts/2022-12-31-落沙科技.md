认不出来这是哪位大佬，总之这是他的总结（对于视频www.bilibili.com/video/BV1gZ4y1R7Si）：



0:00 片头
1:52 第1章:沙子怎么落下
 沙子在收到更新，变成实体落下之前 会检查能否瞬间执行计划刻，之后检查现在位置的方块是否是沙子，才会执行更新操作
我们不需要让他瞬间下落 所以不能在弱加载区块，之后创建落沙实体
在创建落沙实体时，会根据那个坐标来创建，如果能在检查之后，创建实体之前替换方块，就能获得替换方块后的落沙实体
这里并没有摧毁沙子方块，因为在代码里面会检查如果沙子方块和落沙实体同时存在的话，因为那个位置的方块是沙子 而实体是落下的传送门框架，两边不一样 游戏会删除落沙实体，如果检查的时候 存在传送门框架方块和落下的传送门框架实体 ，两边一样所以删除的是传送门方块（正常落下）

10:20 第2章: 线程崩溃小课堂
单线程的程序是按照顺序执行一组指令，不会同时执行2组指令，在多线程时就可以同时执行指令，但是如果两个线程同时访问同一组数据就会出现线程竞争
但是根据代码，在检查后和创建落沙实体前没有多少代码可以操作，所以只能寄希望于多线程

17:34 第3章: 信标机制
染色玻璃或染色玻璃板在放下或被破坏的时候会向下搜寻信标，神奇的是这部分代码是服务端的 ，而这部分代码是运行在一个新的线程里的，为了方便后面叫做玻璃线程

20:41 第4章: “显而易见”的方法不管用 
当时的做法是在主线程放下玻璃后卸载区块，然后让玻璃线程去检查方块，这样就会导致区块加载和世界装饰，但是问题是区块要卸载 首先游戏会计划卸载这个区块（发生在1刻的末尾），然后在下一刻才卸载区块，如果这时候访问这个区块里面的方块，计划中的卸载就会被取消
只能在区块卸载后让玻璃线程去加载区块，但是玻璃线程会在一开始放下玻璃的时候就开始运行了，运行一开始就获取区块，没有办法让他延迟到下一游戏刻
然后世界装饰的时候，会执行瞬间下落，而我们要的是落沙实体，所以需要让这个世界装饰造成另外一个世界装饰，然后再后面的世界装饰过程中把瞬间下落的全局标志关掉
所以上面的方法没法做到

25:37 第5章: 条件竞争的理论
我们让玻璃线程检查方块的时候，用某种方法让他检查的不是目前加载的区块，而是加载一个区块，加载区块的时候可能会触发世界装饰
coolmann的想法是 检查方块会用到getloadedchunk这个函数 这个函数会在目前加载的区块的哈希表中寻找目前加载的区块，我们要通过条件竞争的方法 让这个哈希表返回没有加载到区块，然后游戏会尝试从文件中加载，并且触发世界装饰
简单解释哈希表：如果在获取哈希表的同时，卸载其他区块（用条件竞争的方法）所需求的区块位于哈希表的位置会被改变，所以会搜索不到索要的区块
然后我们能够在玻璃线程触发世界装饰了，和刚才的不管用的方法不同，因为我们让他检查的是不同的区块，刚才的方法是卸载方块所在的区块，所以能够简单

33:00 第6章: 条件竞争的实操
目标是在卸载区块的同时，让玻璃线程获取方块
所以我们要在玩家操作阶段放下玻璃，然后延迟玻璃线程一直到区块卸载阶段
在这个区间最花时间的是刷怪阶段，我们得尽可能让他变短，同时尽可能加长玻璃线程运行的时间
刷怪阶段变短不讲，讲如何可能加长玻璃线程运行的时间
首先里面先获取所在区块和所在方块，这两个是哈希表搜索，本身就要花点时间
哈希表的结构决定了数据不需要花很长时间就能搜索到，但是经过我们的处理就需要花很比平常长的时间了
然后找到了信标后 玻璃线程会给主线程一个计划，更新这个信标，计划回主线程时，主线程回保证没有两个线程同时运行计划的动作，其他线程就必须等着该线程完成，这样也可以让玻璃线程慢下来
以上两件事组合起来能够让玻璃线程足够慢到等到区块卸载阶段了
要触发条件竞争要放下足多的信标和玻璃才行

40:58 第7章: 观察者链
在计划刻瞬间执行的时候，一个观察者能够让方块更新的数量加倍，观察者链会让一个方块更新数量成倍增加，导致游戏变卡
这是在主线程发生的 如果我们让他发生在玻璃线程，就只会卡住玻璃线程，如果观察者链做的够长，连主线程都不需要做什么就能延迟玻璃线程了，就更有机会获得条件竞争

46:24 第8章: 落下的地狱门方块装置
这是myren研究的副产品，
通过这个装置能够获得落下的地狱门传送门方块，把他推进末地就能在末地得到地狱门
地狱门是在主线程点燃的，异步的观察者是在玻璃线程更新在地狱门的沙子
在沙子落下的时候地狱门点燃替换沙子变成落下地狱门方块
Earthcomputer 的电脑上需要让主线程暂停10ms 才能成功，其他人的电脑可能有1/10~1/20的机会失败

49:01 第9章:  片尾
Earthcomputer 提到有人用落下的方块在地狱得到了水